{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LogsProcessor = void 0;\nvar LogParser_1 = require(\"./LogParser\");\nvar LogDocumentBuilder_1 = require(\"./LogDocumentBuilder\");\nvar LogsProcessor = /** @class */function () {\n  function LogsProcessor(collectionNameBuilder) {\n    this.collectionNameBuilder = collectionNameBuilder;\n  }\n  LogsProcessor.prototype.process = function (batch) {\n    var updates = [];\n    if (batch.abi.length < 1) {\n      return updates;\n    }\n    var logParser = new LogParser_1.LogParser(batch.abi);\n    for (var _i = 0, _a = batch.logs; _i < _a.length; _i++) {\n      var log = _a[_i];\n      var logParams = logParser.read(log);\n      var document = LogDocumentBuilder_1.LogDocumentBuilder.build(log, logParams, batch.block, batch.confirmed, batch.chainId);\n      updates.push({\n        collectionName: this.collectionNameBuilder.build(batch.tag),\n        document: document\n      });\n    }\n    return updates;\n  };\n  return LogsProcessor;\n}();\nexports.LogsProcessor = LogsProcessor;","map":{"version":3,"mappings":";;;;;;AAGA;AACA;AAGA;EACE,uBAAoCA,qBAA4C;IAA5C,0BAAqB,GAArBA,qBAAqB;EAA0B;EAE5EC,+BAAO,GAAd,UAAeC,KAAe;IAC5B,IAAMC,OAAO,GAAwB,EAAE;IAEvC,IAAID,KAAK,CAACE,GAAG,CAACC,MAAM,GAAG,CAAC,EAAE;MACxB,OAAOF,OAAO;;IAGhB,IAAMG,SAAS,GAAG,IAAIC,qBAAS,CAACL,KAAK,CAACE,GAAG,CAAC;IAE1C,KAAkB,UAAU,EAAVI,UAAK,CAACC,IAAI,EAAVC,cAAU,EAAVA,IAAU,EAAE;MAAzB,IAAMC,GAAG;MACZ,IAAMC,SAAS,GAAGN,SAAS,CAACO,IAAI,CAACF,GAAG,CAAC;MACrC,IAAMG,QAAQ,GAAGC,uCAAkB,CAACC,KAAK,CAACL,GAAG,EAAEC,SAAS,EAAEV,KAAK,CAACe,KAAK,EAAEf,KAAK,CAACgB,SAAS,EAAEhB,KAAK,CAACiB,OAAO,CAAC;MAEtGhB,OAAO,CAACiB,IAAI,CAAC;QACXC,cAAc,EAAE,IAAI,CAACrB,qBAAqB,CAACgB,KAAK,CAACd,KAAK,CAACoB,GAAG,CAAC;QAC3DR,QAAQ;OACT,CAAC;;IAGJ,OAAOX,OAAO;EAChB,CAAC;EACH,oBAAC;AAAD,CAAC,EAxBD;AAAaoB","names":["collectionNameBuilder","LogsProcessor","batch","updates","abi","length","logParser","LogParser_1","_a","logs","_i","log","logParams","read","document","LogDocumentBuilder_1","build","block","confirmed","chainId","push","collectionName","tag","exports"],"sources":["../../../src/mapping/logs-processor/LogsProcessor.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}