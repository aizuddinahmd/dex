{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LogParser = void 0;\nvar abi_1 = require(\"@ethersproject/abi\");\nvar LogParser = /** @class */function () {\n  function LogParser(abiItems) {\n    this.abiInterface = new abi_1.Interface(abiItems);\n  }\n  LogParser.prototype.read = function (log) {\n    // Solidity supports max 3 topics. https://docs.soliditylang.org/en/latest/contracts.html#events\n    var topics = [log.topic0, log.topic1, log.topic2, log.topic3].filter(function (t) {\n      return t !== null;\n    });\n    // Do not call the `this.abiInterface.parseLog()` method here! The @ethersproject/abi package (5.7.0) has a bug,\n    // that doesn't return `args` with named keys in a specific case. That problem doesn't occur when we call directly the decodeEventLog() method.\n    var eventFragment = this.abiInterface.getEvent(topics[0]);\n    var args = this.abiInterface.decodeEventLog(eventFragment, log.data, topics);\n    var params = {};\n    for (var _i = 0, _a = eventFragment.inputs; _i < _a.length; _i++) {\n      var input = _a[_i];\n      var value = args[input.name];\n      if (value instanceof abi_1.Indexed) {\n        value = value.hash;\n      }\n      params[input.name] = {\n        type: input.type,\n        value: value\n      };\n    }\n    return {\n      name: eventFragment.name,\n      params: params\n    };\n  };\n  return LogParser;\n}();\nexports.LogParser = LogParser;","map":{"version":3,"mappings":";;;;;;AAEA;AAcA;EAGE,mBAAmBA,QAAmB;IACpC,IAAI,CAACC,YAAY,GAAG,IAAIC,eAAS,CAACF,QAA0B,CAAC;EAC/D;EAEOG,wBAAI,GAAX,UAAYC,GAAQ;IAClB;IACA,IAAMC,MAAM,GAAG,CAACD,GAAG,CAACE,MAAM,EAAEF,GAAG,CAACG,MAAM,EAAEH,GAAG,CAACI,MAAM,EAAEJ,GAAG,CAACK,MAAM,CAAC,CAACC,MAAM,CAAC,UAACC,CAAC;MAAK,QAAC,KAAK,IAAI;IAAV,CAAU,CAAa;IAErG;IACA;IAEA,IAAMC,aAAa,GAAG,IAAI,CAACX,YAAY,CAACY,QAAQ,CAACR,MAAM,CAAC,CAAC,CAAC,CAAC;IAC3D,IAAMS,IAAI,GAAG,IAAI,CAACb,YAAY,CAACc,cAAc,CAACH,aAAa,EAAER,GAAG,CAACY,IAAI,EAAEX,MAAM,CAAC;IAE9E,IAAMY,MAAM,GAA6B,EAAE;IAE3C,KAAoB,UAAoB,EAApBC,kBAAa,CAACC,MAAM,EAApBC,cAAoB,EAApBA,IAAoB,EAAE;MAArC,IAAMC,KAAK;MACd,IAAIC,KAAK,GAAGR,IAAI,CAACO,KAAK,CAACE,IAAI,CAAC;MAC5B,IAAID,KAAK,YAAYpB,aAAO,EAAE;QAC5BoB,KAAK,GAAGA,KAAK,CAACE,IAAI;;MAEpBP,MAAM,CAACI,KAAK,CAACE,IAAI,CAAC,GAAG;QACnBE,IAAI,EAAEJ,KAAK,CAACI,IAAI;QAChBH,KAAK;OACN;;IAGH,OAAO;MACLC,IAAI,EAAEX,aAAa,CAACW,IAAI;MACxBN,MAAM;KACP;EACH,CAAC;EACH,gBAAC;AAAD,CAAC,EAnCD;AAAaS","names":["abiItems","abiInterface","abi_1","LogParser","log","topics","topic0","topic1","topic2","topic3","filter","t","eventFragment","getEvent","args","decodeEventLog","data","params","_a","inputs","_i","input","value","name","hash","type","exports"],"sources":["../../../src/mapping/logs-processor/LogParser.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}